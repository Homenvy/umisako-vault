/* =======================
 * Base styles for MTG Turn Engine (style.css)
 * ======================= */

:root { --bg:#111; --bg2:#1b1b1b; --panel:#1b1b1b; --text:#eee; --muted:#888; --border:#333; }

* { box-sizing:border-box; }
html, body { height:100%; }
body { margin:0; background:var(--bg); color:var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

.app { display:grid; grid-template-columns: 1fr; gap:12px; padding:12px; }
header { background:#222; padding:10px; border-radius:6px; border:1px solid var(--border); }
h1 { margin:0 0 8px 0; font-size: 20px; }
h2 { margin:0 0 8px 0; font-size: 16px; }

.panel { background:var(--panel); border:1px solid var(--border); border-radius:8px; padding:10px; }
.row { display:flex; align-items:center; gap:8px; }
.stack { display:flex; flex-direction:column; gap:8px; }

input[type=file], textarea { width:100%; background:#151515; color:#ddd; border:1px solid #333; border-radius:6px; padding:6px; }
textarea { min-height: 90px; }

.btn { background:#444; border:none; color:#fff; padding:6px 10px; border-radius:6px; cursor:pointer; }
.btn:hover { background:#555; }
.btn.good { background:#2e7d32; }
.btn.good:hover { background:#388e3c; }
.btn.danger { background:#c62828; }
.btn.danger:hover { background:#e53935; }
.btn.secondary { background:#1565c0; }
.btn.secondary:hover { background:#1976d2; }
.btn.ghost { background:transparent; border:1px solid #666; }

.small { font-size: 0.85em; }
.muted { color: var(--muted); }

.kpi { display:flex; gap:8px; margin-bottom:8px; }
.kpi .card { background:#222; border:1px solid #333; border-radius:6px; padding:8px; text-align:center; min-width:150px; }
.kpi .label { color:#aaa; font-size:0.8em; }
.kpi .value { font-size:1.2em; }

.list { background:#222; border:1px solid #333; border-radius:6px; padding:8px; margin-top:8px; }
.list ul { list-style:none; margin:0; padding:0; }
.list li { padding:4px 0; }

.phase-pill { background:#444; padding:2px 6px; border-radius:10px; }

.tag { background:#444; padding:0 6px; border-radius:6px; font-size:0.8em; margin-left:4px; }
.kw { background:#555; padding:0 4px; border-radius:4px; font-size:0.75em; margin-left:4px; }
.counter { background:#222; border:1px solid #555; padding:0 4px; border-radius:4px; font-size:0.75em; margin-left:4px; }

#effectsPopover { position:fixed; display:none; z-index:3000; background:#222; color:#fff; padding:10px; border:1px solid #666; border-radius:8px; max-width:260px; }
#effectsPopover .title { font-weight:600; margin-bottom:6px; }
#effectsPopover .text { font-size:0.9em; color:#ddd; }

/* Responsive */
@media (min-width: 1100px){
  .app { grid-template-columns: 1fr 1fr; }
}
/* ===== Mobile thumb dock & bottom sheet ===== */
@media (max-width: 820px) {
  /* Enable mobile mode when coarse pointer (phones) */
  @media (pointer:coarse) {
    body.mobile {
      padding-bottom: env(safe-area-inset-bottom, 0);
    }

    .pcz-dock {
      position: fixed;
      right: max(10px, env(safe-area-inset-right));
      bottom: max(10px, env(safe-area-inset-bottom));
      z-index: 3000;
      width: 220px;  /* radial container size */
      height: 220px;
      pointer-events: none; /* wheel buttons enable below */
    }

    .pcz-core {
      position: absolute;
      right: 0;
      bottom: 0;
      width: 64px;
      height: 64px;
      border-radius: 16px;
      background: #2b2b2b;
      color: #fff;
      border: 1px solid var(--border);
      font-size: 20px;
      pointer-events: auto;
    }

    /* Quarter circle arc container */
    .pcz-wheel {
      position: absolute;
      right: 0;
      bottom: 0;
      width: 200px;
      height: 200px;
      border-bottom-right-radius: 200px;
      overflow: visible;
      pointer-events: auto;
      transform-origin: bottom right;
      transition: transform 160ms ease;
    }

    /* Orbit items placed along an arc */
    .pcz-item {
      position: absolute;
      width: 56px;
      height: 56px;
      border-radius: 14px;
      background: #1f1f1f;
      color: #eee;
      border: 1px solid #3a3a3a;
      font-weight: 600;
      touch-action: manipulation;
    }
    /* Hand (closest), Cmdr, GY, Exile positions on the arc */
    .pcz-item[data-zone="hand"]      { right: 74px; bottom: 10px; }
    .pcz-item[data-zone="commander"] { right: 45px; bottom: 74px; }
    .pcz-item[data-zone="graveyard"] { right: 115px; bottom: 45px; }
    .pcz-item[data-zone="exile"]     { right: 140px; bottom: 110px; }

    .pcz-item[aria-selected="true"] {
      outline: 2px solid #6fd1ff;
    }

    /* Hide on desktop-sized or when not mobile */
    .pcz-dock { display: none; }
    body.mobile .pcz-dock { display: block; }

    /* Bottom sheet */
    .pcz-sheet {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      max-height: 75vh;
      background: #181818;
      border-top: 1px solid var(--border);
      border-radius: 14px 14px 0 0;
      transform: translateY(105%);
      transition: transform 180ms ease;
      z-index: 3001;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 10px;
    }
    .pcz-sheet[aria-hidden="false"] { transform: translateY(0%); }
    body.mobile .pcz-sheet { display: flex; }
    .pcz-sheet-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .pcz-sheet-title { font-weight: 700; }
    .pcz-sheet-content {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      background: #121212;
      border: 1px solid #2b2b2b;
      border-radius: 10px;
      padding: 8px;
      min-height: 120px;
    }
    /* Thumb-friendly list items inside the sheet */
    .pcz-sheet-content .pcz-card,
    .pcz-sheet-content li,
    .pcz-sheet-content .pcz-empty {
      padding: 12px;
      border-bottom: 1px solid #2a2a2a;
      font-size: 16px;
    }
    .pcz-sheet-content .pcz-card:last-child,
    .pcz-sheet-content li:last-child { border-bottom: none; }
  }
}

/* OPTIONAL: Future left-hand mode (TODO)
   Add `body.lefty` and mirror to bottom-left */
body.lefty .pcz-dock { right: auto !important; left: max(10px, env(safe-area-inset-left)); }

